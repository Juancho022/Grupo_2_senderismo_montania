<% let pageTitle='Inventario' %>
    <%- include('partials/head', { styles: ['stylesInventory'], pageTitle: pageTitle }) %>

        <body>
            <%- include('./partials/header') %>

                <main>
                    <!-- Header products start -->
                    <div id="header-products">
                        <h2>Inventario de productos</h2>
                        <div id="search-products">
                            <input type="text-search" placeholder="Búsqueda rápida">
                            <button type="submit" class="search-button"><i class="fa fa-search"></i></button>
                        </div>
                        <div id="button-add-product">
                            <a href="/inventory/create">
                                <button class="new-product">
                                    + Nuevo producto
                                </button>
                            </a>
                        </div>
                    </div>

                    <!-- Table starts -->
                    <div class="table-row">
                        <span class="first-row"> Código </span>
                        <span class="second-row"> Producto </span>
                        <span class="third-row"> Categoría </span>
                        <span class="fourth-row"> Precio </span>
                        <span class="fifth-row"> Stock </span>
                        <span class="sixth-row"> </span>
                    </div>

                    <div class="table-product">
                        <% products && products.forEach(product=> { %>
                            <div class="product-content">
                                <span class="product-code">
                                    <%= product.id %>
                                </span>
                                <div class="product-image">
                                    <img class="product" src="/images/<%= product.img %>" alt="imagen del producto">
                                    <span class="product-name">
                                        <%= product.name %>
                                    </span>
                                </div>
                                <select class="product-category">
                                    <option value="<%= product.category.id %>" selected>
                                        <%= product.category.description %>
                                    </option>
                                </select>

                                <% product.prices.forEach(element => { %>
                                    <span class="product-price">
                                        <%= element.price %>
                                    </span>

                               <%  }) %>
                                <div class="counter">
                                    <div class="button" id="decrease">-</div>
                                    <span id="count">22</span>
                                    <div class="button" id="increase">+</div>
                                </div>
                                <div class="edit-n-delete">
                                    <form action="/inventory/<%= product.id %>/delete?_method=DELETE" method="POST">
                                        <button type="submit"><i class="fa fa-trash trash"></i></button>
                                    </form>

                                    <a href="/inventory/<%= product.id %>/edit"><i
                                            class="fas fa-pencil-alt pencil-edit"></i></a>
                                </div>
                            </div>
                            <% }) %>
                    </div>

                    <%- include('./partials/footer') %>

                </main>


                <!-- JavaScript para la funcionalidad del contador -->
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        // Obtener referencias a los elementos HTML
                        var decreaseButtons = document.querySelectorAll('.button#decrease');
                        var increaseButtons = document.querySelectorAll('.button#increase');
                        var countElements = document.querySelectorAll('.counter #count');

                        // Manejar el evento de decremento
                        decreaseButtons.forEach(function (button, index) {
                            button.addEventListener('click', function () {
                                // Obtener el valor actual y restar 1
                                var currentCount = parseInt(countElements[index].textContent);
                                var newCount = currentCount - 1;

                                // Actualizar el elemento con el nuevo valor
                                countElements[index].textContent = newCount;
                            });
                        });

                        // Manejar el evento de incremento
                        increaseButtons.forEach(function (button, index) {
                            button.addEventListener('click', function () {
                                // Obtener el valor actual y sumar 1
                                var currentCount = parseInt(countElements[index].textContent);
                                var newCount = currentCount + 1;

                                // Actualizar el elemento con el nuevo valor
                                countElements[index].textContent = newCount;
                            });
                        });
                    });
                </script>


        </body>


        </html>